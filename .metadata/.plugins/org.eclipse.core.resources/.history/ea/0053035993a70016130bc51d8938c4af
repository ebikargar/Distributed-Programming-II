<?xml version="1.0" encoding="UTF-8"?>
<schema targetNamespace="http://www.example.org/nffgInfo" xmlns="http://www.w3.org/2001/XMLSchema"
	xmlns:tns="http://www.example.org/nffgInfo" elementFormDefault="qualified">

	<element name="nffgVerifier" type="tns:nffgVerifierType">
		<!-- I define policyName as key here,is the xpath right -->
		<key name="policyNameKey">
			<selector xpath="tns:nffgSet/tns:nffg/policySet/policy" />
			<field xpath="@policyName" />
		</key>
		<keyref name="policyNameRef" refer="tns:policyNameKey">
			<selector xpath="tns:nffgSet/tns:nffg/policySet/policy"></selector>
			<field xpath="@policyName"></field>
		</keyref>
	</element>

	<complexType name="nffgVerifierType">
		<sequence>
			<element name="nffgSet" type="tns:nffgSetType" minOccurs="0"
				maxOccurs="unbounded">

				<key name="nffgNameKey">
					<selector xpath="tns:nffgSet/tns:nffg" />
					<field xpath="@nffgName" />
				</key>
				<keyref name="nffgNameRef" refer="tns:nffgNameKey">
					<selector xpath="tns:nffgSet/tns:nffg"></selector>
					<field xpath="@nffgName"></field>
				</keyref>
			</element>
		</sequence>
	</complexType>
	<complexType name="nffgSetType">
		<sequence>
			<element name="nffg" type="tns:nffgType" minOccurs="1"
				maxOccurs="1">
				<!-- am I right by defining this key and keyref -->
				<key name="nodeNameKey">
					<selector xpath="tns:nodeSet/node" />
					<field xpath="@nodeName" />
				</key>
				<keyref name="nodeNameRef" refer="tns:nodeNameKey">
					<selector xpath="tns:nodeSet/node"></selector>
					<field xpath="@nodeName"></field>
				</keyref>

				<key name="linkNameKey">
					<selector xpath="tns:linkSet/links" />
					<field xpath="@linkName" />
				</key>
				<keyref name="linkNameRef" refer="tns:linkNameKey">
					<selector xpath="tns:linkSet/links"></selector>
					<field xpath="@linkName"></field>
				</keyref>
			</element>
		</sequence>
	</complexType>
	<complexType name="nffgType">
		<sequence>
			<element name="nodeSet" type="tns:nodeSetType" minOccurs="0"
				maxOccurs="unbounded"></element>
			<element name="linkSet" type="tns:linkSetType" minOccurs="0"
				maxOccurs="unbounded">
			</element>
			<element name="policySet" type="tns:policySetType" minOccurs="0"
				maxOccurs="unbounded"></element>
			<element name="upTime" type="tns:timeType"></element>
		</sequence>
		<attribute name="nffgName" type="tns:myStringType" use="required" />
	</complexType>
	
	  <complexType name="timeType">
    	<attribute name="hour" use="required">
    		<simpleType>
	    		<restriction base="nonNegativeInteger">
	    			<maxInclusive value="24"></maxInclusive>
	    		</restriction>
    		</simpleType>
    	</attribute>
    	
    	<attribute name="minute" use="required">
    		<simpleType>
	    		<restriction base="nonNegativeInteger">
	    			<maxInclusive value="59"></maxInclusive>
	    		</restriction>
    		</simpleType>
    	</attribute>
    </complexType>
	
	
	
	
	<simpleType name="myStringType">
		<restriction base="string">
			<pattern value="([a-zA-Z][a-zA-Z0-9])*"></pattern> <!-- is it correct? -->
		</restriction>
	</simpleType>
	<complexType name="nodeSetType">
		<sequence>
			<element name="node" type="tns:nodeType" minOccurs="0"
				maxOccurs="unbounded"></element>
		</sequence>
	</complexType>

	<complexType name="nodeType">
		<sequence>
			<element name="providerCat" type="tns:providerCatType"
				minOccurs="0" maxOccurs="unbounded"></element>
		</sequence> <!-- a general question:when we define an attribute as key/keyref,do we need 
			to define it as attribute too or no?what should be it's type then -->
		<attribute name="nodeName" type="tns:myStringType" use="required"></attribute>
	</complexType>
	<complexType name="providerCatType">
		<attribute name="funcType" type="tns:funcType" use="required"></attribute>
	</complexType>

	<simpleType name="funcType">
		<restriction base="string">
			<enumeration value="FW"></enumeration>
			<enumeration value="DPI"></enumeration>
			<enumeration value="NAT"></enumeration>
			<enumeration value="SPAM"></enumeration>
			<enumeration value="CACHE"></enumeration>
			<enumeration value="VPN"></enumeration>
			<enumeration value="WEB_SERVER"></enumeration>
			<enumeration value="WEB_CLIENT"></enumeration>
			<enumeration value="MAIL_SERVER"></enumeration>
			<enumeration value="MAIL_CLIENT"></enumeration>
		</restriction>
	</simpleType>

	<complexType name="linkSetType">
		<sequence>
			<element name="links" type="tns:linksType" minOccurs="0"
				maxOccurs="unbounded"></element>
		</sequence>
	</complexType>

	<complexType name="linksType">
		<attribute name="linkName" type="tns:myStringType" use="required" />
		<attribute name="sourceNode" type="tns:myStringType" use="required" />
		<attribute name="destNode" type="tns:myStringType" use="required" />
	</complexType> <!-- key and keyref add on nffg element,correct? -->

	<complexType name="policySetType">
		<sequence>
			<element name="policy" type="tns:policyType" minOccurs="0"
				maxOccurs="unbounded">

				<!--<unique name="policyNameUnique"> <selector xpath="tns:policy" /> 
					<field xpath="@policyName" /> </unique> -->

			</element>
		</sequence>
	</complexType>

	<complexType name="policyType">
		<sequence>
			<element name="traversComponent" type="tns:providerCatType"
				minOccurs="0" maxOccurs="unbounded"></element>
		</sequence>  <!-- do we need isPositive as attribute here? -->
		<attribute name="policyName" type="tns:myStringType" use="required"></attribute>
		<attribute name="policyType" type="string" use="required"></attribute> <!-- define one type,and the second one as extension,how is the best way 
			to define reachability and trav? -->
		<attribute name="verificationResult" type="tns:resultType"
			use="required"></attribute> <!-- define a simpletype by two enum -->
		<attribute name="srcNode" type="tns:myStringType" use="required"></attribute>
		<attribute name="destNode" type="tns:myStringType" use="required"></attribute>
	</complexType>

	<simpleType name="resultType">
		<restriction base="string">
			<pattern value="positive|negative" />  <!-- should be positive-negative or true-false -->
		</restriction>
	</simpleType>
</schema>