<?xml version="1.0" encoding="UTF-8"?>
<schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.org/nffgInfo"
xmlns:tns="http://www.example.org/nffgInfo" elementFormDefault="qualified">

	<element name="nffgVerifier" type="tns:nffgVerifierType"></element>
	
   <complexType name="nffgVerifierType">
    	<sequence>
    		<element name="nffgSet" type="tns:nffgSetType">
    
    <!-- am I right by defining this key and keyref -->		
    		<key name="nffgNameKey">
			<selector xpath="tns:nffgSet/tns:nffg" />
		    <field xpath="@nffgName" />
			</key>

    	<keyref name="nffgNameRef" refer="tns:nffgNameKey">
    		<selector xpath="tns:nffgSet/tns:nffg"></selector>
    		<field xpath="@nffgName"></field>
    	</keyref>
   	  	</element>
       	</sequence>
    </complexType>
     <!-- am I right by defining this key and keyref -->
     <complexType name="nffgSetType">
    	<sequence>
    		<element name="nffg" type="tns:nffgType"></element>
    	</sequence>
     </complexType>
    
     <complexType name="nffgType">
    	<sequence>
    		<element name="nodeSet"   type="tns:nodeSetType"></element>
    		<element name="linkSet"   type="tns:linkSetType"></element>
    		<element name="policySet" type="tns:policySetType"></element>
       	</sequence>
       	<attribute name="nffgName" type="string"   use="required" /> <!-- how/do we need to define it's uniqueness -->
       	<attribute name="upTime"   type="dateTime" use="required" />
     </complexType>
    
     <complexType name="nodeSetType">
    	<sequence>
    		<element name="node" type="tns:nodeType"></element>
    	</sequence>
    </complexType>
    
     <complexType name="nodeType">
    	<sequence>
    		<element name="providerCat" type="tns:providerCatType"></element>
    	</sequence>
    	<attribute name="nodeName" type="string" use="required"></attribute>
    </complexType>
 
	<complexType name="providerCatType">
    	 <attribute name="funcType" type="string" use="required">
    		<tns:simpleType name="funcType">
    			<tns:restriction base="tns:string">
    				<enumeration value="FW"></enumeration>
    				<enumeration value="DPI"></enumeration>
    				<enumeration value="NAT"></enumeration>
    				<enumeration value="SPAM"></enumeration>
    				<enumeration value="CACHE"></enumeration>
    				<enumeration value="VPN"></enumeration>
    				<enumeration value="WEB_SERVER"></enumeration>
    				<enumeration value="WEB_CLIENT"></enumeration>
    				<enumeration value="MAIL_SERVER"></enumeration>
    				<enumeration value="MAIL_CLIENT"></enumeration>
    			</tns:restriction>
    		</tns:simpleType>
    		</attribute>
    	</complexType>
    
      <complexType name="linkSetType">
    	<sequence>
    		<element name="links" type="tns:linksType"></element>
    	</sequence>
    </complexType>
    
    <complexType name="linksType">
    	 <attribute name="linkName" type="string" use="required"  />
    	 <attribute name="sourceNode" type="string" use="required" />
    	 <attribute name="destNode" type="string" use="required" />
    </complexType>
    		
          <complexType name="policySetType">
    	<sequence>
    		<element name="policy" type="tns:policyType"></element>
    	</sequence>
    </complexType>
    
    <complexType name="policyType">
    	<sequence>
    		<element ref="providerCatType" minOccurs="1"></element> <!-- how add providecatalouge here is right? -->
    	</sequence>
    	 <attribute name="policyName" type="string" use="required"></attribute>
    	 <attribute name="pType" 	  type="string" use="required"></attribute>
    	 <attribute name="result" 	  type="string"	use="required"></attribute>
    	 <attribute name="srcNode"    type="IDREF"  use="required"></attribute>
    	 <attribute name="destNode"   type="IDREF"  use="required"></attribute>
    </complexType>
    
</schema>