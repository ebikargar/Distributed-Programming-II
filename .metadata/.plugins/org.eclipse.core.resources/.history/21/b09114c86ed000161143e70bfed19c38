package it.polito.dp2.NFFG.sol1;

import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import it.polito.dp2.NFFG.FunctionalType;
import it.polito.dp2.NFFG.LinkReader;
import it.polito.dp2.NFFG.NodeReader;
import it.polito.dp2.NFFG.sol1.jaxb.LinkType;
import it.polito.dp2.NFFG.sol1.jaxb.LinksType;
import it.polito.dp2.NFFG.sol1.jaxb.NffgType;
import it.polito.dp2.NFFG.sol1.jaxb.NodeType;
import it.polito.dp2.NFFG.sol1.jaxb.ProviderCatType;

public class MyNodeReader implements NodeReader {

	// ------------ Node Element --------------------------------//
	private String nodeName;
	private FunctionalType functional_r;
	private HashMap<String, LinkReader> link_list;
	// ---------------------------------------------------------//

	public MyNodeReader(NodeType node_r, NffgType nffg, HashMap<String, LinkReader> link_list_parameter) {
		if (node_r != null) {
			this.nodeName = node_r.getNodeName();
			this.functional_r = node_r.getProviderCat().getFuncType();
			this.link_list = link_list_parameter; // set an initially empty list
			System.out.println("My NodeReader fulfilled Correctly");
		}

	}

	// -------------------------------------------------------------------//

	@Override
	public String getName() {
		if (nodeName != null)
			return this.nodeName;
		else {
			System.out.println("nodeName Object is Null");
			return null;
		}
	}

	@Override
	public FunctionalType getFuncType() {
		// ??????????
		return null;
	}

	@Override
	public Set<LinkReader> getLinks() {

		HashSet<LinkReader> link_r = new HashSet<LinkReader>();
		for (LinkReader myLinkReader : link_list.values()) {
			if (myLinkReader.getSourceNode().getName().equals(this.nodeName)) {
				link_r.add(myLinkReader);
			}
		}
		return link_r;
	}

}
