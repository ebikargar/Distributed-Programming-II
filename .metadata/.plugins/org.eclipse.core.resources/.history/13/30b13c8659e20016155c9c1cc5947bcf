package it.polito.dp2.NFFG.sol3.client2;

import java.util.Calendar;
import java.util.HashSet;
import java.util.Set;

import it.polito.dp2.NFFG.NffgReader;
import it.polito.dp2.NFFG.NffgVerifier;
import it.polito.dp2.NFFG.PolicyReader;

public class MyNffgVerifier implements NffgVerifier {

	public MyNffgVerifier(String url_address) {
		// TODO Auto-generated constructor stub
	}

	@Override
	public NffgReader getNffg(String arg0) {
		for (NffgReader nffg_r : nffg_r_set) {
			if (nffg_r.equals(arg0)) {
				return nffg_r;
			}
		}
		return null;
	}

	@Override
	public Set<NffgReader> getNffgs() {
		if (nffg_r_set != null)
			return nffg_r_set;
		else {
			System.out.println("nffg_r_set Object is Null");
			return null;
		}
	}

	@Override
	public Set<PolicyReader> getPolicies() {
		if (policy_r_set != null)
			return policy_r_set;
		else {
			System.out.println("Policyreader set object is Null");
			return null;
		}
	}

	@Override
	public Set<PolicyReader> getPolicies(String arg0) {

		HashSet<PolicyReader> policy_r_set = new HashSet<PolicyReader>();
		for (PolicyReader policy_r : policy_r_set) {
			if (policy_r.getNffg().getName().equals(arg0)) {
				policy_r_set.add(policy_r);
			}
		}
		if (policy_r_set.isEmpty())
			return null;
		return policy_r_set;
	}

	@Override
	public Set<PolicyReader> getPolicies(Calendar arg0) {
		HashSet<PolicyReader> policy_r_set = new HashSet<PolicyReader>();
		for (PolicyReader policy_r : policy_r_set) {
			if (policy_r.getResult().getVerificationTime().after(arg0)) {
				policy_r_set.add(policy_r);
			}
		}
		if (policy_r_set.isEmpty())
			return null;
		return policy_r_set;
	}

}
