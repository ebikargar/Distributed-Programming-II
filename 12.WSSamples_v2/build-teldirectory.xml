<?xml version="1.0" encoding="UTF-8"?>

<project basedir="." name="teldirectory-service">
	<description>
		Script for counter Web Service
	</description>
	
	<property name="serviceName" value="teldirectory" />
	<property name="root.location" location="${basedir}" />
	<property name="schema.dir" location="${root.location}/${serviceName}/WebContent/WEB-INF/classes/xsd"/>
	
    <target name="generate-artifacts" depends="init" description="generate Java classes from schema">
		<exec executable="xjc" failonerror="true" >
			<arg value="-d" />
			<arg value="${gen.dir}" />
			<arg value="-p" />
			<arg value="it.polito.dp2.rest.${serviceName}.jaxb" />
			<arg value="${schema.dir}/${serviceName}.xsd" />
		</exec>
    </target>

	<target name="build.service" depends="generate-artifacts">
		<echo>build dir: ${build.dir}</echo>
		<javac debug="on" 
	       fork="true"
	       destdir="${build.dir}" 
		   includeantruntime="false"
		   source="${source}"
		   target="${target}"
	 	>
			<src path="${src.dir}"/>
			<src path="${gen.dir}"/>
			<include name="it/polito/dp2/rest/${serviceName}/**/*.java"/>
			<classpath>
				<path refid="classpath" />
			</classpath>
		</javac>
	</target>
	
	<import file="service-build.xml"/>
		
</project>
